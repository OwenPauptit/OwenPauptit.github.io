<!DOCTYPE html>
<html>
    <body>
        <style>

        </style>
        <canvas id="canvas" onmouseover="startRunning()" onmouseout="stopRunning()"></canvas>
        <script src="js/ripple.js"></script>
        <script>

            let ripple;
            let pixelSize = 8;
            let running = false;

            startRunning = function(){
                running = true;
            }

            stopRunning = function(){
                running = false;
            }

            window.onload = function()
            {
                canvas = document.getElementById("canvas");
                ctx = canvas.getContext("2d");
                canvas.width = window.innerWidth * 0.97;
                canvas.height = window.innerHeight * 0.7;

                ripple = new Ripple(canvas.width, canvas.height, pixelSize);
                //console.log("here");
                //ripple.draw(ctx);
                //update();

                document.addEventListener("mousedown", () => {
                let x = Math.floor(event.clientX / pixelSize); // Gets Mouse X
                let y = Math.floor(event.clientY / pixelSize); // Gets Mouse Y
                ripple.previous[x][y] = 2500;
                });
                var loop = setInterval(update, 1000/20);
            }

            update = function()
            {
                
                /*ripple.previous[20][20] = 2550;
                ripple.previous[21][20] = 2550;
                ripple.previous[20][21] = 2550;
                ripple.previous[19][20] = 2550;
                ripple.previous[20][19] = 2550;
                ripple.previous[50][50] = 255;*/
                //ripple.addRandomPixels(1);
                if(running){
                    ripple.draw(ctx);
                }

            }
        </script>
    </body>
</html>